//
//  MainViewController.swift
//  NewTro_Todo
//
//  Created by Carki on 2022/09/09.
//

import Foundation
import UIKit

import RealmSwift

class MainViewController: BaseViewController {
    
    let mainView = MainView()
    let cellDetailCustomView = CustomMenuPopupView()
    let cellDetailCustomVC = CustomMenuPopupViewController()
    
    
    //MARK: -
    var calendar = Calendar.current
    
    //ë‚ ì§œê³„ì‚°ì„ ìœ„í•œ ë°ì´íŠ¸ë³€ìˆ˜
    var pickedNowDate = Date()
    //ë°ì´íŠ¸í¬ë§· ë‹¤ ë°”ê¾¸ê¸°
    let dateFormatter = DateFormatter()
    
    
    //MARK: -
    static var addTableCell: [String] = []
    
    let localRealm = try! Realm()
    var id: ObjectId?
    var tasks: Results<Todo>! {
        didSet {
            mainView.tableView.reloadSections(IndexSet(0...0), with: .automatic)
            print("ë°ì´í„° ë³€í•¨!")
        }
    }
    
    override func loadView() {
        self.view = mainView
    }
    
    override func viewDidLoad() {
        super.viewDidLoad()
        //MARK: -- Print
        print("Realm is located at:", localRealm.configuration.fileURL!)
        //MARK: -- Print
        view.backgroundColor = .mainBackGroundColor
        navigationSetting()
        tableSetting()
        quickNoteTapGesture()
        fetchRealm()
        
        mainView.rightButton.addTarget(self, action: #selector(tomorrowFunc), for: .touchUpInside)
        mainView.leftButton.addTarget(self, action: #selector(yesterdayFunc), for: .touchUpInside)
        
        //ì…€ ì‚­ì œ ë…¸í‹°
        NotificationCenter.default.addObserver(
          self,
          selector: #selector(self.didDismissDetailNotification(_:)),
          name: NSNotification.Name("DismissDetailView"),
          object: nil
        )
        
    }
    
    @objc func didDismissDetailNotification(_ notification: Notification) {
          DispatchQueue.main.async {
              self.mainView.tableView.reloadData()
          }
    }
    
    //ë‚ ì ë°”ê¿€ë•Œë§ˆë‹¤ ì‹¤í–‰ë˜ì–´ì•¼ ë˜ë‹ˆ
    //ì²˜ìŒ ì‹¤í–‰ì€ ì˜¤ëŠ˜ë‚ ì§œë¼ í•˜ë”ë¼ë„
    //ë‚ ì§œë¥¼ ì´ë™ - í•´ë‹¹ ë‚ ì§œ
    //ë‹¤ë¥¸ ë·°ë¥¼ ê°”ë‹¤ì™€ë„ ë‚ ì§œìœ ì§€
    func fetchRealm() {
        dateFormatter.dateFormat = "yyyyë…„ MMì›” ddì¼"
        
        //MARK: -- ë‚ ì§œ ë³€ê²½ì—ë”°ë¥¸ í…Œì´ë¸” ë·° ê°±ì‹ ì„ìœ„í•´ ì´ë¶€ë¶„ ë°”ê¿”ì¤Œ
        //ë³€ê²½ - > let convertDate = dateFormatter.string(from: nowDate)
        let convertDate = dateFormatter.string(from: pickedNowDate)
        tasks = localRealm.objects(Todo.self).sorted(byKeyPath: "regDate", ascending: true).where {
            $0.stringDate == convertDate
        }//.sorted(byKeyPath: "", ascending: <#T##Bool#>)
    }
    
    override func viewWillAppear(_ animated: Bool) {
        super.viewWillAppear(animated)
        //í…Œì´ë¸”ë·°ì˜ í‚¤ë³´ë“œê°€ ì…€ì„ ê°€ë¦´ë•Œ
        //keyboardObserver()
        
        
        fetchRealm()
        navigationController?.navigationBar.titleTextAttributes = [.foregroundColor: UIColor.mainBackGroundColor]
    }
    
    override func viewWillDisappear(_ animated: Bool) {
        super.viewWillDisappear(animated)
        
        //í‚¤ë³´ë“œ ëë‚˜ë©´ ì—†ì•°
        //keyboardObserverRemove()
    }
    
    func navigationSetting() {
        let calendarButton = UIBarButtonItem(image: UIImage(systemName: "calendar"), style: .plain, target: self, action: #selector(calendarButtonClicked))
        let menuButton = UIBarButtonItem(image: UIImage(systemName: "line.3.horizontal"), style: .plain, target: self, action: #selector(menuButtonClicked))
        
        title = "ë©”ì¸"
        navigationController?.navigationBar.backgroundColor = .mainBackGroundColor
        navigationItem.leftBarButtonItem = calendarButton
        navigationItem.leftBarButtonItem?.tintColor = .orange
        
        navigationItem.rightBarButtonItem = menuButton
        navigationItem.rightBarButtonItem?.tintColor = .orange
    }
    
    func tableSetting() {
        mainView.tableView.register(MainTableViewCell.self, forCellReuseIdentifier: MainTableViewCell.identifier) as? MainTableViewCell
        mainView.tableView.register(TablePlusCell.self, forCellReuseIdentifier: TablePlusCell.identifier) as? TablePlusCell
        
        mainView.tableView.delegate = self
        mainView.tableView.dataSource = self
        
        //ì…€ Drag &  Drop
        mainView.tableView.dragInteractionEnabled = true
        mainView.tableView.dragDelegate = self
        mainView.tableView.dropDelegate = self
    }
    
    func quickNoteTapGesture() {
        let tapGesture = UITapGestureRecognizer(target: self, action: #selector(quickNote))
        mainView.quickNoteView.addGestureRecognizer(tapGesture)
    }
    
    //í€µë…¸íŠ¸
    @objc func quickNote() {
        //ì˜µì…”ë„ idê°’ì„ ì„ ì–¸í•˜ê³  í€µë…¸íŠ¸ê°€ ë§Œë“¤ì–´ì§€ë©´ idê°’ ì „ë‹¬
        var noteID: ObjectId?
        let vc = CustomNotePopupViewController()
        let subVC = CalendarViewController()
        let nav = UINavigationController(rootViewController: vc)
        nav.modalPresentationStyle = .overCurrentContext
        
        subVC.dateCompletionHandler = {
            self.pickedNowDate = subVC.selectedDate
        }
    
        let strPickedNowDate = dateFormatter.string(from: pickedNowDate)
        vc.nowDate = pickedNowDate
        vc.receivedStrDate = strPickedNowDate
        
        //
        let isExisistedText = localRealm.objects(QuickNote.self).where {
            $0.stringToRegDate == strPickedNowDate
        }
        
        if isExisistedText.count == 0 {
            let task = QuickNote(note: "", regDate: pickedNowDate, stringToRegDate: strPickedNowDate, isWrited: false)

            try! localRealm.write({
                localRealm.add(task)
            })
            self.present(nav, animated: false)
        } else {
            self.present(nav, animated: false)
        }
        
    }
    
    @objc func calendarButtonClicked() {
        let vc = CalendarViewController()
        let nav = UINavigationController(rootViewController: vc)
        
        dateFormatter.dateFormat = "yyyyë…„ MMì›” ddì¼"
        //ë°©ë²•1
        vc.dateCompletionHandler = {
            self.pickedNowDate = vc.selectedDate
            let convertDate = self.dateFormatter.string(from: vc.selectedDate)
            print("ì „ë‹¬ëœ ë°ì´íŠ¸: ", convertDate)
            self.mainView.datePickBtn.setTitle(convertDate, for: .normal)
            self.fetchRealm()
            self.mainView.tableView.reloadData()
        }
        self.present(nav, animated: true)
    }
    
    @objc func menuButtonClicked() {
        let vc = SettingViewController()
        self.navigationController?.pushViewController(vc, animated: true)
    }
    //MARK: -- cell dateCalculation
    func dayCalculation(formula: String) -> Date { // ì›” ë³„ ì¼ ìˆ˜ ê³„ì‚°
        dateFormatter.dateFormat = "yyyyë…„ MMì›” ddì¼"
        let result: Date?
        
        if formula == "plus" {
            result = calendar.date(byAdding: .day, value: 1,to: pickedNowDate)!
            print("+ê³„ì‚°ëœ ë‚ ì§œ", result)
            pickedNowDate = result!
            
            let formattedPickedDate = dateFormatter.string(from: pickedNowDate)
            mainView.datePickBtn.setTitle(formattedPickedDate, for: .normal)
            
            //**
            mainView.tableView.reloadData()
            
            //MARK: - ë¦¬í„´ê°’ resultë¡œ ë°”ê¶ˆë„ ê°™ì€ì§€ í™•ì¸
            return pickedNowDate
        } else {
            //ê°’ ì „ë‹¬ì„ pickê°€ ì•„ë‹ˆë¼ ê³„ì‚°ëœ ê°’ì„ ì „ë‹¬
            result = calendar.date(byAdding: .day, value: -1,to: pickedNowDate)!
            print("-ê³„ì‚°ëœ ë‚ ì§œ", result)
            pickedNowDate = result!
            
            let formattedPickedDate = dateFormatter.string(from: pickedNowDate)
            mainView.datePickBtn.setTitle(formattedPickedDate, for: .normal)
            
            //**
            mainView.tableView.reloadData()
            
            return pickedNowDate
        }
        
    }
    
    @objc func yesterdayFunc() {
        dayCalculation(formula: "minus")
        fetchRealm()
    }
    
    @objc func tomorrowFunc() {
        dayCalculation(formula: "plus")
        fetchRealm()
    }
    
}

//MARK: -- TableView
extension MainViewController: UITableViewDelegate, UITableViewDataSource {
    //MARK: -- Cell DetailButtonEvent(VC:CustomMenuPopupViewController)
    //MARK: --ê³µë¶€í•˜ê¸°(ë²„íŠ¼ì— ëŒ€í•œ íƒœê·¸ì „ë‹¬)
    //check
    @objc func menuPopupButtonClicked(btnName: UIButton) {
        let nav = UINavigationController(rootViewController: cellDetailCustomVC)
        
        //ê°™ì€ë°©ì‹
        //cellDetailCustomView.setImportanceButton.addTarget(self, action: #selector(cellDetailCustomVC.importanceButtonClicked), for: .touchUpInside)
        //
        
        nav.modalPresentationStyle = .overCurrentContext
        cellDetailCustomVC.receivedTag = btnName.tag
        cellDetailCustomVC.tasks = self.tasks
        
        self.present(nav, animated: false)
    }
    //MARK: --ê³µë¶€í•˜ê¸°(ë²„íŠ¼ì— ëŒ€í•œ íƒœê·¸ì „ë‹¬)
    
    @objc func completeButtonClicked(btnName: UIButton) {
        
        if tasks[btnName.tag].isFinished == false {
            try! self.localRealm.write {
                tasks[btnName.tag].isFinished = true
            }
        } else {
            try! self.localRealm.write {
                tasks[btnName.tag].isFinished = false
            }
        }
    }
    
    func numberOfSections(in tableView: UITableView) -> Int {
        return 2
    }
    
    //ì„¹ì…˜ì˜ ì…€ ê°œìˆ˜ë‹ˆê¹Œ
    //ì„¹ì…˜ 0 - ì¶”ê°€ë²„íŠ¼ ëˆŒë¦¬ë©´ 1ê°œì”© ì¶”ê°€
    //ì„¹ì…˜ 1 - ê³ ì •(í”ŒëŸ¬ìŠ¤ë²„íŠ¼)
    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        if section == 0 {
            return tasks.count
            
        } else if section == 1 {
            return 1
        }
        return tasks.count
        
    }
    
    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
    
        switch indexPath.section {
        case 0:
            
            //ì…€ ìƒì„± ì‹œì ì— í´ë¡œì €ë¡œ ì „ë‹¬
            let cell = tableView.dequeueReusableCell(withIdentifier: MainTableViewCell.identifier, for: indexPath) as! MainTableViewCell
            
            cell.todoTextField.text = tasks[indexPath.row].todo!
            //ì…€ ìƒì„± ì‹œì ì— idë„ ì „ë‹¬í•¨
            cell.id = tasks[indexPath.row].objectID
            
            //ì…€ ë²„íŠ¼ì— tagê°’ì„ ë¶€ì—¬(ì…€ ìˆœì„œëŒ€ë¡œ)
            //ë§Œì•½ ë²„íŠ¼ì˜ íƒœê·¸ê°’ê³¼
//            for i in 0..<tasks.count {
//                cell.importanceSelectBtn.tag = i
//            }
//            cellDetailCustomVC.receivedTag = cell.importanceSelectBtn.tag
//            cellDetailCustomVC.id = tasks[cell.importanceSelectBtn.tag].objectID
            //MARK: --ê³µë¶€í•˜ê¸°(ë²„íŠ¼ì— ëŒ€í•œ íƒœê·¸ì „ë‹¬)
            
            cell.importanceSelectBtn.tag = indexPath.row //ìƒì„¸ì„¤ì •
            cell.completeTodoBtn.tag = indexPath.row //ì™„ë£Œë²„íŠ¼
            cell.importanceSelectBtn.addTarget(self, action: #selector(menuPopupButtonClicked), for: .touchUpInside)
            cell.completeTodoBtn.addTarget(self, action: #selector(completeButtonClicked), for: .touchUpInside)
            
            
            //MARK: --ê³µë¶€í•˜ê¸°(ë²„íŠ¼ì— ëŒ€í•œ íƒœê·¸ì „ë‹¬)
            
            //fetchRealm()
            
            print("ì „ë‹¬idê°’(cellDetailCustomVC.id)", cellDetailCustomVC.receivedTag)
            print("ì „ë‹¬idê°’(tasks[indexPath.row].objectID)", tasks[cell.importanceSelectBtn.tag].objectID)
            
            cell.backgroundColor = .systemCyan
            
            cell.selectionStyle = .none
            return cell
        case 1:
            let plusCell = tableView.dequeueReusableCell(withIdentifier: TablePlusCell.identifier, for: indexPath) as! TablePlusCell
            plusCell.receivedNowDate = pickedNowDate
            print("pickedNowDate", pickedNowDate)
            
            //íƒ€ì…ì§€ì •ì— ê°’ì„ ëŒ€ì…
            plusCell.reloadCell = {
//                tableView.reloadSections(IndexSet(0...0), with: .automatic)
                tableView.reloadData()
            }
            
            tableView.reloadSections(IndexSet(0...0), with: .automatic)
            plusCell.backgroundColor = .systemCyan
            
            plusCell.selectionStyle = .none
            return plusCell
        default:
            let cell1 = tableView.dequeueReusableCell(withIdentifier: "cel", for: indexPath)
            return cell1
        }
        
    }
    
    
    
    func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -> CGFloat {
        if indexPath.section == 0 {
            return 60
        } else if indexPath.section == 1 {
            return 70
        }
        
        return 50
    }
    
    func tableView(_ tableView: UITableView, moveRowAt sourceIndexPath: IndexPath, to destinationIndexPath: IndexPath) {
        
        /*
         1 -> regdate
         2 -> regdate
         1ì˜ ë°ì´í„°ê°€ 2ì˜ ë°ì´íŠ¸

         ì‘ì„±ì„ 2ê°€ ë¨¼ì €í–ˆë‹¤ê³ 
         ë’¤ì— 1ì´ ì‘ì„ ëœê±°ì„

         ê·¸ëŸ¼ ë ˆê·¸ë°ì´íŠ¸ë§Œ ë°”ê¾¸ë©´ ë˜ì§€ì•Šì„ê¹Œ
         ê·¸ëŸ¬ê³  ë‚˜ì„œ ì›ë˜ 1ë²ˆ ë°ì´í„°ìƒì—ì„œë„ ë ˆê·¸ë°ì´í„°ê°€ ë°”ê»´ì•¼ë˜ê³ 
         ê·¸ëŸ¬ê³  ì •ë ¬ì‹œí‚¤ë©´
         */
        
//        =================ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡=================
//        print("\(sourceIndexPath.row) -> \(destinationIndexPath.row)")
//        print("í•¨ìˆ˜í˜¸ì¶œ", #function)
//        
//        var temp: Date?
//        var temp1: Date?
//        
//        var dateArr: [Date] = []
//        
//        dateArr = localRealm.objects(Todo.self).map {
//            $0.regDate
//        }
//        
//        let moveCell = dateArr[sourceIndexPath.row]
//        dateArr.remove(at: sourceIndexPath.row)
//        dateArr.insert(moveCell, at: destinationIndexPath.row)
//        
//        print(dateArr)
//        
//        //tasksì— ì§ì ‘ ë³€ê²½
//        //ì²˜ìŒ ëª‡ë²ˆì€ ë°”ë€œ
//        //ë’¤ì— í…Œì´ë¸” ì¶”ê°€ê°€ ë˜ê¸´í•˜ëŠ”ë° ë·°ì— ê·¸ë ¤ì§€ì§€ê°€ ì•ŠìŒ
//        temp = tasks[sourceIndexPath.row].regDate
//        temp1 = tasks[destinationIndexPath.row].regDate
////        tasks[sourceIndexPath.row].regDate = temp1!
////        tasks[destinationIndexPath.row].regDate = temp!
//        
//        try! localRealm.write {
//            localRealm.create(Todo.self, value: ["objectID": tasks[sourceIndexPath.row].objectID, "regDate": temp1], update: .modified)
//            localRealm.create(Todo.self, value: ["objectID": tasks[destinationIndexPath.row].objectID, "regDate": temp], update: .modified)
////            fetchRealm()
//        }
//        mainView.tableView.reloadData()
//
//        print("ë¬´ë¹™", start)
//        print("ë°ìŠ¤í‹°ë„¤ì´ì…˜", end)
        
//        //tasksì— ì§ì ‘ ë³€ê²½
//        temp = tasks[sourceIndexPath.row].regDate
//        temp1 = tasks[destinationIndexPath.row].regDate
//        tasks[sourceIndexPath.row].regDate = temp1!
//        tasks[destinationIndexPath.row].regDate = temp!
        
//        dateArr.forEach { swap in
//            try! localRealm.write {
//                localRealm.add(swap)//Todo(value: ["objectID": swap.objectID, "regDate": swap.regDate]), update: .modified)
//            }
//
//        }
        
        
        
//        =================ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡=================
        
        //ì›€ì§ì´ë ¤ëŠ” ì…€
//        var start = localRealm.objects(Todo.self).where {
//            $0.regDate == tasks[sourceIndexPath.row].regDate
//        }

        //ë–¨ì–´ì§„ìœ„ì¹˜ì˜ ì…€
//        var end = localRealm.objects(Todo.self).where {
//            $0.regDate == tasks[destinationIndexPath.row].regDate
//        }
        
//        var temp3: Results<Todo>?
        
        //ë°ì´í„° êµí™˜
        //        temp3 = start
        //        start = end
        //        end = temp3!
        // start -> end
        // end -> start
        //ë¡œ ë°”ë€Œê²Œ ë¨
    
        //ì†ŒìŠ¤ ì¸ë±ìŠ¤ë¥¼ startì˜ regDate
//        try! localRealm.write {
//            sourceToUpdate.regDate = start[0].regDate
//        }
        //ë°ìŠ¤í‹°ë„¤ì´ì…˜ ì¸ë±ìŠ¤ë¥¼ endë¡œ í•´ë´¤ëŠ”ë°
        //ë°ì´í„°ê°€ ì•ˆë°”ë€Œê³  ì²˜ìŒ ë°”ë€ Dateë¡œë§Œ ê³„ì† ë°”ê»´ì„œ ë‚˜ì¤‘ì—ëŠ” Dateê°€ ë‹¤ ë˜‘ê°™ì•„ì§(ë˜‘ê°™ì•„ì ¸ì„œ ì¸ë±ìŠ¤ ì˜¤ë¥˜ ì•ˆë‚¨)
//        try! localRealm.write {
//            destiToUpdate.regDate = temp![0].regDate
//        }
//        mainView.tableView.reloadData()
//        try! self.localRealm.write {
//            print("destinationCell[0].regDate", start[0].regDate)
//            print("movingCell[0].regDate", end[0].regDate)
//            localRealm.create(Todo.self, value: ["objectID": tasks[sourceIndexPath.row].objectID, "regDate": end[0].regDate], update: .modified)
//            localRealm.create(Todo.self, value: ["objectID": tasks[destinationIndexPath.row].objectID, "regDate": start[0].regDate], update: .modified)
//            mainView.tableView.reloadData()
//
//
//        }
        
        
        print(tasks[0])
    }
}


extension MainViewController: UITableViewDragDelegate {
    func tableView(_ tableView: UITableView, itemsForBeginning session: UIDragSession, at indexPath: IndexPath) -> [UIDragItem] {
            return [UIDragItem(itemProvider: NSItemProvider())]
        }
}

extension MainViewController: UITableViewDropDelegate {
    func tableView(_ tableView: UITableView, dropSessionDidUpdate session: UIDropSession, withDestinationIndexPath destinationIndexPath: IndexPath?) -> UITableViewDropProposal {
        if session.localDragSession != nil {
            return UITableViewDropProposal(operation: .move, intent: .insertAtDestinationIndexPath)
        }
        return UITableViewDropProposal(operation: .cancel, intent: .unspecified)
    }
    func tableView(_ tableView: UITableView, performDropWith coordinator: UITableViewDropCoordinator) { }
}



//extension MainViewController {
//    func keyboardObserver() {
//        NotificationCenter.default.addObserver(self, selector: #selector(keyboardShow), name: UIResponder.keyboardWillShowNotification, object: nil)
//
//        NotificationCenter.default.addObserver(self, selector: #selector(keyboardHide), name: UIResponder.keyboardWillHideNotification, object: nil)
//    }
//
//    func keyboardObserverRemove() {
//            NotificationCenter.default.removeObserver(self, name: UIResponder.keyboardWillShowNotification, object: nil)
//            NotificationCenter.default.removeObserver(self, name: UIResponder.keyboardWillHideNotification, object: nil)
//        }
//
//        @objc func keyboardShow(notification: NSNotification) {
//            guard let keyboardSize = (notification.userInfo?[UIResponder.keyboardFrameEndUserInfoKey] as? NSValue)?.cgRectValue else { return }
////            self.view.frame.origin.y -=
////            self.view.frame.origin.y = 0 - keyboardSize.height
////            self.mainView.bottomView.frame.origin.y = 0 - keyboardSize.height
//            self.mainView.bottomView.snp.remakeConstraints { make in
//                make.top.equalTo(mainView.safeAreaLayoutGuide)
//                make.leading.equalTo(mainView.safeAreaLayoutGuide).offset(20)
//                make.trailing.equalTo(mainView.safeAreaLayoutGuide).offset(-20)
//                make.bottom.equalTo(mainView.mainBackgroundImage.snp.top).offset(keyboardSize.height)
//            }
//        }
//
//        @objc func keyboardHide(notification: NSNotification) {
////            self.constraint.constant += 100
////            self.view.frame.origin.y = 0
////            self.mainView.bottomView.frame.origin.y = 0
//            self.mainView.bottomView.snp.remakeConstraints { make in
//                make.top.equalTo(mainView.todoView.snp.bottom).offset(8)
//                make.leading.equalTo(mainView.safeAreaLayoutGuide).offset(20)
//                make.trailing.equalTo(mainView.safeAreaLayoutGuide).offset(-20)
//                make.bottom.equalTo(mainView.mainBackgroundImage.snp.top)
//            }
//        }
//}
//
